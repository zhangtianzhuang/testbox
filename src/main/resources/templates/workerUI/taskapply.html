<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>成都电务维修段联锁试验模拟装置管理系统</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">

  <!-- Font Awesome Icons 图标风格-->
  <link rel="stylesheet" href="static/plugins/fontawesome-free/css/all.min.css">

  <!-- Theme style 主题样式-->
  <link rel="stylesheet" href="static/dist/css/adminlte.min.css">

  <!-- 日期表样式 -->
  <link rel="stylesheet" href="static/plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css">


</head>
<body class="hold-transition sidebar-mini">
<div class="wrapper">

  <!-- Navbar -->
  <!-- 顶端导航栏 -->
  <nav class="main-header navbar navbar-expand navbar-dark navbar-light">
    <!-- Left navbar links -->
    <ul class="navbar-nav">
      <!-- 压缩 -->
      <li class="nav-item">
        <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
      </li>
    </ul>

    <!-- 顶端右侧链接 私信、通知、选择 -->
    <ul class="navbar-nav ml-auto">
      <!-- Messages Dropdown Menu -->
      <li class="nav-item dropdown">
        <a class="nav-link" data-toggle="dropdown" href="#">
          <i class="far fa-comments"></i>
          <span class="badge badge-danger navbar-badge">3</span>  <!-- 消息个数 -->
        </a>
        <!-- 下拉菜单消息 -->
        <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
          <a href="#" class="dropdown-item">
            <!-- Message Start -->
            <div class="media">
              <img src="../../static/dist/img/user1-128x128.jpg" alt="User Avatar" class="img-size-50 mr-3 img-circle">
              <div class="media-body">
                <h3 class="dropdown-item-title">
                  Brad Diesel
                  <span class="float-right text-sm text-danger"><i class="fas fa-star"></i></span>
                </h3>
                <p class="text-sm">Call me whenever you can...</p>
                <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
              </div>
            </div>
            <!-- Message End -->
          </a>
          <div class="dropdown-divider"></div>
          <a href="#" class="dropdown-item">
            <!-- Message Start -->
            <div class="media">
              <img src="../../static/dist/img/user8-128x128.jpg" alt="User Avatar" class="img-size-50 img-circle mr-3">
              <div class="media-body">
                <h3 class="dropdown-item-title">
                  John Pierce
                  <span class="float-right text-sm text-muted"><i class="fas fa-star"></i></span>
                </h3>
                <p class="text-sm">I got your message bro</p>
                <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
              </div>
            </div>
            <!-- Message End -->
          </a>
          <div class="dropdown-divider"></div>
          <a href="#" class="dropdown-item">
            <!-- Message Start -->
            <div class="media">
              <img src="../../static/dist/img/user3-128x128.jpg" alt="User Avatar" class="img-size-50 img-circle mr-3">
              <div class="media-body">
                <h3 class="dropdown-item-title">
                  Nora Silvester
                  <span class="float-right text-sm text-warning"><i class="fas fa-star"></i></span>
                </h3>
                <p class="text-sm">The subject goes here</p>
                <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
              </div>
            </div>
            <!-- Message End -->
          </a>
          <div class="dropdown-divider"></div>
          <a href="#" class="dropdown-item dropdown-footer">See All Messages</a>
        </div>
      </li>
      <!-- Notifications Dropdown Menu -->
      <li class="nav-item dropdown">
        <a class="nav-link" data-toggle="dropdown" href="#">
          <i class="far fa-bell"></i>
          <span class="badge badge-warning navbar-badge">15</span>
        </a>
        <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
          <span class="dropdown-header">15 Notifications</span>
          <div class="dropdown-divider"></div>
          <a href="#" class="dropdown-item">
            <i class="fas fa-envelope mr-2"></i> 4 new messages
            <span class="float-right text-muted text-sm">3 mins</span>
          </a>
          <div class="dropdown-divider"></div>
          <a href="#" class="dropdown-item">
            <i class="fas fa-users mr-2"></i> 8 friend requests
            <span class="float-right text-muted text-sm">12 hours</span>
          </a>
          <div class="dropdown-divider"></div>
          <a href="#" class="dropdown-item">
            <i class="fas fa-file mr-2"></i> 3 new reports
            <span class="float-right text-muted text-sm">2 days</span>
          </a>
          <div class="dropdown-divider"></div>
          <a href="#" class="dropdown-item dropdown-footer">See All Notifications</a>
        </div>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-widget="control-sidebar" data-slide="true" href="#" role="button">
          <i class="fas fa-user-circle"></i>
        </a>
      </li>
    </ul>
  </nav>
  <!-- /.navbar -->

  <!-- Main Sidebar Container -->
  <!-- 左侧标签栏 -->
  <aside class="main-sidebar sidebar-dark-primary elevation-4">
    <!-- Brand Logo -->
    <a href="#" class="brand-link">
      <img src="static/dist/img/ChengduLogo.png" alt="Logo" class="brand-image img-circle elevation-3" style="opacity: .8">
      <span class="brand-text font-weight-light">模拟装置管理系统</span>
    </a>

    <!-- Sidebar -->
    <div class="sidebar">
      <!-- Sidebar user panel (optional) -->
      <!-- 用户图标和信息 -->
      <div class="user-panel mt-3 pb-3 mb-3 d-flex">
        <div class="image">
          <img src="static/dist/img/user2-160x160.jpg" class="img-circle elevation-2" alt="User Image">
        </div>
        <div class="info">
          <a href="#" class="d-block"> 张三 </a>
        </div>
      </div>


      <!-- Sidebar Menu -->
      <nav class="mt-2">
        <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
          <!-- Add icons to the links using the .nav-icon class
               with font-awesome or any other icon font library -->
          <!-- 树形结构目录 -->
          <!-- 任务管理 -->
          <li class="nav-item has-treeview menu-open">
            <a href="#" class="nav-link active">
              <i class="nav-icon fas fa-tachometer-alt"></i>
              <p>
                任务管理
                <i class="right fas fa-angle-left"></i>
              </p>
            </a>
            <ul class="nav nav-treeview">
              <li class="nav-item">
                <a href="taskapply.html" class="nav-link active">
                  <i class="far fa-circle nav-icon"></i>
                  <p>提交任务申请</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="taskshow.html" class="nav-link">
                  <i class="far fa-circle nav-icon"></i>
                  <p>查看申请结果</p>
                </a>
              </li>
            </ul>
          </li>
          <!--/.任务管理-->

          <!-- 非树形结构目录 -->
          <li class="nav-item">
            <a href="#" class="nav-link">
              <i class="nav-icon fas fa-th"></i>
              <p>
                Simple Link
                <span class="right badge badge-danger">New</span>
              </p>
            </a>
          </li>

        </ul>
      </nav>
      <!-- /.sidebar-menu -->
    </div>
    <!-- /.sidebar -->
  </aside>

  <!-- Content Wrapper. Contains page content -->
  <!-- 主体内容 -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <!-- 内容顶部 -->
    <div class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1 class="m-0 text-dark">提交任务申请表</h1>
          </div><!-- /.col -->
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="#">成都</a></li>
              <li class="breadcrumb-item active">任务管理</li>
            </ol>
          </div><!-- /.col -->
        </div><!-- /.row -->
      </div><!-- /.container-fluid -->
    </div>
    <!-- /.content-header -->

    <!-- 页面内容 -->
    <!-- Main content -->
    <div class="content">
      <div class="container-fluid">
        <div class="card card-default" id="apply">
          <div class="card-header">
            <h3 class="card-title">填写任务申请表</h3>
          </div>
          <!-- /.card-header -->
          <div class="card-body">
            <div class="row">
              <!-- 第一列内容 -->
              <div class="col-md-3">
                <div class="form-group">
                  <label>工程名称</label>
                  <input type="text" class="form-control" id="projectName" placeholder="请输入工程名称">
                </div>
                <div class="form-group">
                  <label> 工区名称 </label>
                  <input type="text" class="form-control" id="workArea" placeholder="请输入工区名称">
                </div>
                <div class="form-group">
                  <label>使用地点</label>
                  <input type="text" class="form-control" id="targetRegion" placeholder="请输入工作地点">
                </div>
                <div class="form-group">
                  <label>任务描述</label>
                  <textarea class="form-control" id="taskDesc" rows="3" placeholder="一些描述信息..."></textarea>
                </div>
              </div>
              <!-- /.col -->
              <!-- 第二列内容 -->
              <div class="col-md-3">

                <div class="form-group">
                  <label>领取日期</label>
                  <!-- 日历暂时调不出来 -->
<!--                  <div class="input-group date" id="reservationdate" data-target-input="nearest">-->
                  <div class="input-group date" id="getDate" data-target-input="nearest">
                    <input type="text" id="borrowDate" class="form-control datetimepicker-input" data-target="#getDate"/>
                    <div class="input-group-append" data-target="#getDate" data-toggle="datetimepicker">
                      <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                    </div>
                  </div>
                </div>

                <div class="form-group">
                  <label>归还日期</label>
                  <!-- 日历暂时调不出来 -->
                  <div class="input-group date" id="reservationdate" data-target-input="nearest">
                    <input type="text" id="returnDate" class="form-control datetimepicker-input" data-target="#reservationdate"/>
                    <div class="input-group-append" data-target="#reservationdate" data-toggle="datetimepicker">
                      <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                    </div>
                  </div>
                </div>

              </div>
              <!-- /.col -->

              <!-- 设备列表添加 -->
              <div class="col-md-6">
                <div class="form-group">
                  <label>试验箱</label>
                  <input type="text" class="form-control" id="boxList" placeholder="选择的试验箱编号，空格分开">
                </div>

                <div class="form-group card">
                  <!--              <div class="card">-->
                  <!-- TO DO List -->
                  <div class="card-header">
                    <h3 class="card-title">
                      <i class="ion ion-clipboard mr-1"></i>
                      选择要使用的试验箱
                    </h3>

                    <div class="card-tools">
                      <ul class="pagination pagination-sm">
                        <li class="page-item"><a href="#" class="page-link">&laquo;</a></li>
                        <li class="page-item"><a href="#" class="page-link">1</a></li>
                        <li class="page-item"><a href="#" class="page-link">2</a></li>
                        <li class="page-item"><a href="#" class="page-link">3</a></li>
                        <li class="page-item"><a href="#" class="page-link">&raquo;</a></li>
                      </ul>
                    </div>
                  </div>
                  <!-- /.card-header -->
                  <div class="card-body">
                    <ul class="todo-list" data-widget="todo-list">
                      <li>
                        <!-- drag handle -->
                        <span class="handle">
                          <i class="fas fa-briefcase"></i>
                        </span>
                        <!-- checkbox -->
                        <div  class="icheck-primary d-inline ml-2"> <!-- 勾选框 一行显示 大小 -->
                          <input type="checkbox" value="DJ-1" name="todo1" id="todoCheck1">
                          <label for="todoCheck1"></label>
                        </div>
                        <!-- todo text -->
                        <span class="text">DJ-1</span>
                      </li>
                      <li>
                    <span class="handle">
                      <i class="fas fa-briefcase"></i>
                    </span>
                        <div  class="icheck-primary d-inline ml-2">
                          <input type="checkbox" value="DJ-2" name="todo2" id="todoCheck2">
                          <label for="todoCheck2"></label>
                        </div>
                        <span class="text">DJ-2</span>
                      </li>
                      <li>
                    <span class="handle">
                      <i class="fas fa-briefcase"></i>
                    </span>
                        <div  class="icheck-primary d-inline ml-2">
                          <input type="checkbox" value="DZ-1" name="todo3" id="todoCheck3">
                          <label for="todoCheck3"></label>
                        </div>
                        <span class="text">DZ-1</span>
                      </li>
                      <li>
                    <span class="handle">
                      <i class="fas fa-briefcase"></i>
                    </span>
                        <div  class="icheck-primary d-inline ml-2">
                          <input type="checkbox" value="GW-1" name="todo4" id="todoCheck4">
                          <label for="todoCheck4"></label>
                        </div>
                        <span class="text">GW-1</span>
                      </li>
                    </ul>
                  </div>
                  <!-- /.card-body -->
                  <div class="card-footer clearfix">
                    <button type="button" class="btn btn-info float-right"  onclick="addbox()"><i class="fas fa-plus"></i> 添加试验箱 </button>
                  </div>
                  <!-- /.card -->
                </div>
              </div>
            </div>
            <!-- /.row -->
            <!-- 提交按钮 -->
            <div class="row">
              <div class="col-md-4 text-center">
                <!-- 空着 -->
              </div>

              <div class="col-md-1 text-center">
                <button type="submit" class="btn btn-block btn-primary" id="submitapp">提交</button>
              </div>

              <div class="col-md-2 text-center">
              </div>

              <div class="col-md-1 text-center">
                <button type="reset" class="btn btn-secondary btn-block" id="resetapp" onclick="resetAll()">重置</button>
              </div>

              <div class="col-md-4 text-center">
                <!-- 空着 -->
              </div>

            </div>
          </div>
        </div>

        <div class="card card-default" id="applysuccess" style="display: none"> <!-- 默认隐藏 -->
          <div class="card-header">
            <h3 class="card-title">任务申请成功</h3>
          </div>
          <!-- 显示申请表单结果 -->
          <!-- /.card-header -->
          <div class="card-body">
            <dl class="row">
              <dt class="col-sm-4">任务编号</dt>
              <dd class="col-sm-8">20200517AZTBDSA</dd>
              <dt class="col-sm-4">申请人</dt>
              <dd class="col-sm-8">张三</dd>
              <dt class="col-sm-4">所属工区</dt>
              <dd class="col-sm-8">成都</dd>
              <dt class="col-sm-4">工程名称</dt>
              <dd class="col-sm-8">列控检修</dd>
              <dt class="col-sm-4">工作地点</dt>
              <dd class="col-sm-8">成都普速场</dd>
              <dt class="col-sm-4">申请试验箱编号</dt>
              <dd class="col-sm-8">DZ-1、DJ-1、DJ-2、GW-1</dd>
              <dt class="col-sm-4">使用时间</dt>
              <dd class="col-sm-8">2020/05/06 01:00 — 2020/05/06 04:00</dd>
              <dt class="col-sm-4">任务备注</dt>
              <dd class="col-sm-8">我是任务备注</dd>
              <dt class="col-sm-4">申请时间</dt>
              <dd class="col-sm-8">2020/05/04 16:09</dd>
            </dl>
            <!-- 确认按钮 返回申请页-->
            <div class="row">
              <div class="col-md-10"></div>
              <div class="col-md-1">
                <button type="reset" class="btn btn-primary btn-block" id="confirm"> 确认 </button>
              </div>
            </div>
          </div>
          <!-- /.card-body -->
        </div>
        <!-- /.container-fluid -->
      </div>

    <!-- /.content -->
    </div>
  <!-- /.content-wrapper -->
  </div>
  <!-- Control Sidebar -->

  <!-- 右侧呼出栏，可以设计成用户登录登出-->
  <aside class="control-sidebar control-sidebar-dark">
    <!-- Control sidebar content goes here -->
    <div class="p-3">
      <h5>个人信息</h5>
      <p>Sidebar content</p>
    </div>
  </aside>
  <!-- /.control-sidebar -->

  <!-- Main Footer -->
  <footer class="main-footer">
    <!-- To the right -->
    <div class="float-right d-none d-sm-inline">
      成都电务维修段联锁试验模拟装置管理系统
    </div>
    <!-- Default to the left -->
    <!-- 不知道要改成什么 -->
    <strong>Copyright &copy; 2014-2020 <a href="https://adminlte.io">AdminLTE.io</a>.</strong> All rights reserved.
  </footer>
</div>
<!-- ./wrapper -->

<!-- REQUIRED SCRIPTS -->
<!-- jQuery -->
<script src="static/plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="static/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- AdminLTE App -->
<!-- 一些动态响应 -->
<script src="static/dist/js/adminlte.min.js"></script>

<!-- InputMask -->
<!-- 选择日期需要-->
<script src="static/plugins/moment/moment.min.js"></script>
<script src="static/plugins/inputmask/jquery.inputmask.min.js"></script>
<!-- Tempusdominus Bootstrap 4 -->
<script src="static/plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js"></script>

<script>
  $(document).ready(function(){
    // 提交申请，隐藏申请界面，显示申请表单
    $("#submitapp").click(function(){
      $("#apply").toggle();
      $("#applysuccess").css("display","block");

      // ajax前端发送数据
      var applyForm = {
        "taskName": $('#projectName').val(),
        "workerName": "张三",
        "taskArea": $('#workArea').val(),
        "taskPoint": $('#targetRegion').val(),
        "borrowDate": $('#borrowDate').val(),
        "returnDate": $('#returnDate').val(),
        "taskDesc": $('#taskDesc').val(),
        "boxes": $('#boxList').val(),
        "taskWorkerId": "001"
        };
      $.ajax({
        url: window.location.pathname + "/task",
        type:'POST',
        dataType:'json',
        contentType:'application/json;charset=UTF-8',
        data:JSON.stringify(applyForm),
        success:function(data){
          console.log(data);
        }
      });

    });
    // 确认申请，隐藏表单信息，回到清空后的申请界面
    $("#confirm").click(function () {
      resetAll();
      $("#apply").toggle();
      $("#applysuccess").css("display","none");
    });
  });

  // 清空输入框和textarea,重置复选框
  function resetAll() {
    $("div input").val("");
    $("div textarea").val("");
    $('input[type="checkbox"]:checked').each(function(index,value) {
      $(this).prop("checked",false);
    });
  }

  // 添加试验箱
  function addbox() {
    var ids = "";
    //获取所有选中的值，将其用逗号隔开
    $('input[type="checkbox"]:checked').each(function(index,value) {
      ids += $(this).val() + " ";
      $(this).prop("checked",false);
    });
    // 将结果写入inputID对应的输入框中
    $("#boxList").val(ids);
  }
</script>
</body>
</html>
